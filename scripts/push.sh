function prepushHook() {
	
	if [ -f "prepush_hooks.sh" ]; then
		echo "Executing pre push hooks..."
		while read SCRIPTLINE
		do
		    eval "$SCRIPTLINE"
			if [ $? -eq 0 ]; then
				echo -e "\033[32m>> $SCRIPTLINE ran successfully." 
			else
				echo -e "\033[31m>> $SCRIPTLINE failed."
				return 0
			fi
		done < prepush_hooks.sh
		
		eval "$1='1'" 
	else
		echo "No prepush_hooks.sh found."
		#TODO: ask if user wants to push anyway
	fi
}

function pushitgood() {

	echo '
	$$$$$$$\                  $$\   $$\                                                                       
	$$  __$$\                 $$ |  $$ |                                                                      
	$$ |  $$ | $$$$$$\        $$ |  $$ |      $$\  $$\  $$\  $$$$$$\  $$$$$$$\  $$$$$$$\   $$$$$$\            
	$$ |  $$ |$$  __$$\       $$ |  $$ |      $$ | $$ | $$ | \____$$\ $$  __$$\ $$  __$$\  \____$$\           
	$$ |  $$ |$$ /  $$ |      $$ |  $$ |      $$ | $$ | $$ | $$$$$$$ |$$ |  $$ |$$ |  $$ | $$$$$$$ |          
	$$ |  $$ |$$ |  $$ |      $$ |  $$ |      $$ | $$ | $$ |$$  __$$ |$$ |  $$ |$$ |  $$ |$$  __$$ |          
	$$$$$$$  |\$$$$$$  |      \$$$$$$  |      \$$$$$\$$$$  |\$$$$$$$ |$$ |  $$ |$$ |  $$ |\$$$$$$$ |          
	\_______/  \______/        \______/        \_____\____/  \_______|\__|  \__|\__|  \__| \_______|          
                                                                                                          
                                                                                                          
                                                                                                          
	          $$\                                                                                      $$$$\  
	          $$ |                                                                                    $$  $$\ 
	 $$$$$$\  $$ | $$$$$$\  $$\   $$\        $$$$$$\         $$$$$$\   $$$$$$\  $$$$$$\$$$$\   $$$$$$\\__/$$ |
	$$  __$$\ $$ | \____$$\ $$ |  $$ |       \____$$\       $$  __$$\  \____$$\ $$  _$$  _$$\ $$  __$$\  $$  |
	$$ /  $$ |$$ | $$$$$$$ |$$ |  $$ |       $$$$$$$ |      $$ /  $$ | $$$$$$$ |$$ / $$ / $$ |$$$$$$$$ |$$  / 
	$$ |  $$ |$$ |$$  __$$ |$$ |  $$ |      $$  __$$ |      $$ |  $$ |$$  __$$ |$$ | $$ | $$ |$$   ____|\__/  
	$$$$$$$  |$$ |\$$$$$$$ |\$$$$$$$ |      \$$$$$$$ |      \$$$$$$$ |\$$$$$$$ |$$ | $$ | $$ |\$$$$$$$\ $$\   
	$$  ____/ \__| \_______| \____$$ |       \_______|       \____$$ | \_______|\__| \__| \__| \_______|\__|  
	$$ |                    $$\   $$ |                      $$\   $$ |                                        
	$$ |                    \$$$$$$  |                      \$$$$$$  |                                        
	\__|                     \______/                        \______/                                         
   	'

	git remote update 

	echo "Comparing local to remote revision..."
	LOCAL=$(git rev-parse @)
	REMOTE=$(git rev-parse @{u})
	BASE=$(git merge-base @ @{u})

	if [ $LOCAL = $REMOTE ]; then
	    echo -e "\033[31mNothing to push."
	elif [ $LOCAL = $BASE ]; then
	    echo -e "\033[31mRemote is ahead, please pull first."
	elif [ $REMOTE = $BASE ]; then
		retval=''
		prepushHook retval
		if [ "1" != "$retval" ]; then
			echo -e '\033[31m
			$$$$$$$$\  $$$$$$\  $$$$$$\ $$\       $$$$$$$$\ $$$$$$$\  
			$$  _____|$$  __$$\ \_$$  _|$$ |      $$  _____|$$  __$$\ 
			$$ |      $$ /  $$ |  $$ |  $$ |      $$ |      $$ |  $$ |
			$$$$$\    $$$$$$$$ |  $$ |  $$ |      $$$$$\    $$ |  $$ |
			$$  __|   $$  __$$ |  $$ |  $$ |      $$  __|   $$ |  $$ |
			$$ |      $$ |  $$ |  $$ |  $$ |      $$ |      $$ |  $$ |
			$$ |      $$ |  $$ |$$$$$$\ $$$$$$$$\ $$$$$$$$\ $$$$$$$  |
			\__|      \__|  \__|\______|\________|\________|\_______/                                                           
			 '
		else '
		    $$$$$$\  $$\   $$\  $$$$$$\   $$$$$$\  $$$$$$$$\  $$$$$$\   $$$$$$\  
		   $$  __$$\ $$ |  $$ |$$  __$$\ $$  __$$\ $$  _____|$$  __$$\ $$  __$$\ 
		   $$ /  \__|$$ |  $$ |$$ /  \__|$$ /  \__|$$ |      $$ /  \__|$$ /  \__|
		   \$$$$$$\  $$ |  $$ |$$ |      $$ |      $$$$$\    \$$$$$$\  \$$$$$$\  
		    \____$$\ $$ |  $$ |$$ |      $$ |      $$  __|    \____$$\  \____$$\ 
		   $$\   $$ |$$ |  $$ |$$ |  $$\ $$ |  $$\ $$ |      $$\   $$ |$$\   $$ |
		   \$$$$$$  |\$$$$$$  |\$$$$$$  |\$$$$$$  |$$$$$$$$\ \$$$$$$  |\$$$$$$  |
		    \______/  \______/  \______/  \______/ \________| \______/  \______/ 
            '                                                         
                                                                      
                                                                      
			
			git push
		fi 	 
	else
	    echo -e "\033[31m Diverged."
	fi
}

